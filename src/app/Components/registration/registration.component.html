<div>
  <h2 class="text-2xl pb-3">Создание пользователя</h2>
  <form (ngSubmit)="registration()" #registrationForm="ngForm" (keydown)="isSpace($event)">
    <div>
      <div class="flex flex-col gap-2">
          <div>
            <label for="name">Имя:</label>
            <div class="relative w-full">
              <i class="text-black absolute right-2.5 top-1/2 transform -translate-y-1/2">
                <fa-icon [icon]="faUser"></fa-icon>
              </i>
              <input class="px-2 pr-10 pl-2.5" type="text" id="name" name="name" required minlength="3" [(ngModel)]="newUser.name"
                     pattern="[a-zA-Z]*" #name="ngModel"
                     [class.invalid-input]="name.invalid && name.touched">
            </div>
          </div>
        <div>
          <label for="username">Логин:</label>
          <div class="relative w-full">
            <i class="text-black absolute right-2.5 top-1/2 transform -translate-y-1/2">
              <fa-icon [icon]="faUser"></fa-icon>
            </i>
            <input class="px-2 pl-2.5 pr-10" type="text" id="username" name="username" required minlength="3"
                   [(ngModel)]="newUser.username" #username="ngModel"
                   [class.invalid-input]="username.invalid && username.touched">
          </div>
        </div>
        <div>
          <label for="password">Пароль:</label>
          <div class="relative w-full">
            <i class="text-black absolute left-3 top-1/2 transform -translate-y-1/2">
              <fa-icon [icon]="faLockOpen"></fa-icon>
            </i>
            <input class="px-2 pl-10" type="password" id="password" name="password" required minlength="6"
                   [(ngModel)]="newUser.password" #password="ngModel"  [class.invalid-input]="password.invalid && password.touched">
          </div>
        </div>
        <div>
          <label for="confirmPassword">Повторите пароль:</label>
          <div class="relative w-full">
            <i class="text-black absolute left-3 top-1/2 transform -translate-y-1/2">
              <fa-icon [icon]="faLockOpen"></fa-icon>
            </i>
            <input class="px-2 pl-10" type="password" id="confirmPassword" name="confirmPassword" required minlength="6"
                   [(ngModel)]="confirmPassword" #confirmPasswordModel="ngModel"
                   [appPasswordMatch]="newUser.password"
                   [class.invalid-input]="confirmPasswordModel.invalid && confirmPasswordModel.touched || confirmPasswordModel.value != newUser.password">
          </div>
        </div>
        <div class="flex items-center gap-2 text-primary">
          <input type="checkbox" class="w-fit  border-primary border-2 p-2" id="checkbox">
          <label for="checkbox" class="text-primary">Запомнить меня</label>
        </div>
        <button [disabled]="!registrationForm.valid" type="submit" class="custom-btn-primary text-primary">
          <i>
            <fa-icon [icon]="faSave" class="pr-2"></fa-icon>
          </i>
          <span>Создать пользователя</span>
        </button>
      </div>
      @if (error) {
        <div
          class="error-block ">
          <div class="alert">
            <fa-icon [icon]="faExclamationTriangle" class="text-error px-4"></fa-icon>
            <div class="border-l border-error px-4" [innerHTML]="errorMessage.replace('\n', '<br />')">
              <p class=" px-4">
                {{errorMessage}}
              </p>
            </div>
          </div>
        </div>
      }
    </div>
  </form>
</div>
<div class="absolute right-4 top-4">
  <button (click)="closeModal()">
    X
  </button>
</div>
